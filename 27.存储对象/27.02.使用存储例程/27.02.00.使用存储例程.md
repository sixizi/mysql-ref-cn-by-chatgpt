## 27.2 使用存储例程

- [27.2.1 存储例程语法](./27.02.01.存储例程语法.md)
- [27.2.2 存储例程与 MySQL 权限](./27.02.02.存储例程与 MySQL 权限.md)
- [27.2.3 存储例程元数据](./27.02.03.存储例程元数据.md)
- [27.2.4 存储过程、函数、触发器与 LAST_INSERT_ID()](./27.02.04.存储过程、函数、触发器与 LAST_INSERT_ID.md)

MySQL 支持**存储例程**（`Stored routines`），包括**存储过程**和**存储函数**。存储例程是一组可存储在服务器上的 SQL 语句。一旦定义完成，客户端就不必重复发送这些单独的语句，而是可以直接调用该存储例程。

存储例程在某些场景下非常有用：

- 当多个客户端应用由不同编程语言编写、运行在不同平台，但需要执行相同的数据库操作时，存储例程特别有用。
- 安全性要求高的环境。例如银行，通常将所有常见操作封装在存储过程和存储函数中。这样不仅能提供一致且安全的运行环境，还能保证每个操作被正确记录（日志）。在这种设置下，应用和用户不会直接访问数据库表，而只能执行特定的存储例程。

存储例程能减少服务器与客户端之间传输的信息量，从而提升性能。不过这会增加数据库服务器的负载，因为更多工作在服务器端完成，而客户端（应用）端的工作量减少。如果有大量客户端（例如 Web 服务器）共用一个或少量数据库服务器，需要考虑这一点。

存储例程使你可以在数据库服务器上建立函数库。这类似现代应用编程语言的设计（例如使用类封装功能），即便在数据库外的开发中，这种设计理念也对程序员有益。

MySQL 遵循 **SQL:2003** 标准的存储例程语法，该语法也被 IBM 的 DB2 使用。本节介绍的所有语法均受支持，并在适当位置记录了限制和扩展。

### 其他资源

- 在使用存储过程和函数时，你可以参考 **Stored Procedures User Forum**。
- 有关 MySQL 存储例程常见问题，可参见 [**附录 A.4 MySQL 8.0 FAQ：存储过程和函数**](#)。
- 存储例程的使用有一些限制，参见 [**27.8 存储程序的限制**](#)。
- 存储例程的二进制日志记录方式，参见 [**27.7 存储程序二进制日志记录**](#)。