### 27.2.2 存储例程与 MySQL 权限

MySQL 的授权系统在处理存储例程时遵循以下规则：

- 创建存储例程需要 `CREATE ROUTINE` 权限。
- 修改或删除存储例程需要 `ALTER ROUTINE` 权限。如果需要，该权限会**自动授予例程创建者**；当例程被删除时，该权限也会**从创建者处自动撤销**。
- 执行存储例程需要 `EXECUTE` 权限。如果需要，该权限会**自动授予例程创建者**（例程删除时自动撤销）。存储例程的默认 SQL SECURITY 特性为 DEFINER，这意味着：只要用户有访问与该例程关联的数据库的权限，就可以执行该例程。
- 如果系统变量 `automatic_sp_privileges` 设置为 0，则 `EXECUTE` 和 `ALTER ROUTINE` 权限不会自动授予或撤销例程的创建者。
- 例程的创建者（Creator） 是执行 CREATE 语句的账号，这可能与例程定义中的 DEFINER 账号不同。

- 例程定义中指定的 **DEFINER 账号** 可以查看例程的所有属性，包括其定义。

  该账号可以完全访问例程的输出信息，例如：

  - `INFORMATION_SCHEMA.ROUTINES` 表中的内容
  - `SHOW CREATE FUNCTION` 和 `SHOW CREATE PROCEDURE` 语句
  - `SHOW FUNCTION CODE` 和 `SHOW PROCEDURE CODE` 语句
  - `SHOW FUNCTION STATUS` 和 `SHOW PROCEDURE STATUS` 语句

对于 **非 DEFINER 账号**，其访问例程属性的权限取决于授予该账号的权限：

- 如果拥有 `SHOW_ROUTINE` 权限，或全局 `SELECT` 权限，则可以查看例程的所有属性，包括定义。
- 如果仅有 `CREATE ROUTINE`、`ALTER ROUTINE` 或 `EXECUTE` 权限（且授权范围覆盖该例程），则只能查看例程的所有属性，但**不包括定义**。





