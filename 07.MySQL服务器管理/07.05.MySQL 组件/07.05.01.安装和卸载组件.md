### 7.5.1 安装和卸载组件



组件在使用前必须先加载到服务器中。MySQL 支持在运行时手动加载组件，以及在服务器启动时自动加载组件。

当一个组件被加载时，其信息可通过 [第 7.5.2 节，“获取组件信息”](#752-获取组件信息) 中描述的方式获取。

可以使用 SQL 语句 INSTALL COMPONENT 和 UNINSTALL COMPONENT 来加载和卸载组件。例如：

```mysql
INSTALL COMPONENT 'file://component_validate_password';
UNINSTALL COMPONENT 'file://component_validate_password';
```

一个加载器服务（loader service）负责组件的加载与卸载，并将已加载的组件注册到系统表 mysql.component 中。

组件操作相关的 SQL 语句对服务器运行和 mysql.component 系统表的影响如下：

- INSTALL COMPONENT 会将组件加载到服务器中，使组件立即生效。加载器服务还会将组件注册到系统表 mysql.component 中。在服务器后续重启时，加载器服务会在启动过程中自动加载该表中列出的所有组件。即使服务器是使用 --skip-grant-tables 选项启动，也会进行该加载。可选的 SET 子句允许在安装组件时设置其系统变量值。
- UNINSTALL COMPONENT 会停用组件并将其从服务器中卸载。加载器服务还会从系统表 mysql.component 中注销这些组件，从而使服务器在后续重启时不再加载它们。

与用于服务器插件的 INSTALL PLUGIN 语句相比，INSTALL COMPONENT 的一大优点是：**无需了解平台特定的文件名后缀**，即可指定组件名称。这意味着同一个 INSTALL COMPONENT 语句可以跨平台统一执行。

当组件被安装时，它可能会自动安装相关的可加载函数（loadable functions）；如果是这样，当卸载该组件时，这些函数也会被自动卸载。